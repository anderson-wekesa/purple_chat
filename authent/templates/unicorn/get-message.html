<div unicorn:poll-2000="refresh_chats" class="col-md-6 col-lg-7 col-xl-8">
  

  <!--Chats-->
  <ul class="list-unstyled">

    {% for message in messages %}
    {% if message.user != user %}
    <!--Other's Chat Box-->
    <li class="d-flex justify-content-between mb-4">
      <!--{ if user.image %-->
      <img src="{{ message.user.image.url }}" alt="avatar"
        class="rounded-circle d-flex align-self-start me-3 shadow-1-strong" width="60">
      <!--{ else %
      <img src="{ static 'generic_user.jpg' %" alt="avatar"
        class="rounded-circle d-flex align-self-start me-3 shadow-1-strong" width="60">
      { endif %-->
      <div class="card w-100">
        <div class="card-header d-flex justify-content-between p-3">
          <p class="fw-bold mb-0">{{ message.user }}</p>
          <p class="text-muted small mb-0"><i class="far fa-clock"></i> {{ message.time }} </p> <!--Set time sent here-->
        </div>
        <div class="card-body">
          <p class="mb-0">
            {{ message.content }}
          </p>
        </div>
      </div>
    </li>

    {% else %}

    <!--Your Chat Box-->
    <li class="d-flex justify-content-between mb-4">
      <div class="card w-100">
        <div class="card-header d-flex justify-content-between p-3">
          <p class="fw-bold mb-0" style="color:#B970FF">{{ message.user }}</p>
          <p class="text-muted small mb-0"><i class="far fa-clock"></i> {{ message.time }} </p> <!--Set time sent here-->
        </div>
        <div class="card-body">
          <p class="mb-0">
            {{ message.content }}
          </p>
        </div>
      </div>
      <!--{ if message.user.image %-->
      <img src="{{ message.user.image.url }}" alt="avatar"
        class="rounded-circle d-flex align-self-start ms-3 shadow-1-strong" width="60">
      <!--{ else %
      <img src="{ static 'generic_user.jpg' %" alt="avatar"
        class="rounded-circle d-flex align-self-start ms-3 shadow-1-strong" width="60">
      { endif %-->
    </li>

    {% endif %}
    {% endfor %}

  </ul>

    
  <div style="background-color:#424242">  <!--action="" id="text-form" method="post" onsubmit="return(this.form.reset() && scrollDown());">-->
    <!--Enter Text-->
    <div class="bg-white mb-3">
      <div class="form-outline"> <!-- -->
        <textarea unicorn:model="message" style="background-color:#424242" class="form-control" name="textmsg" id="textAreaExample2" rows="4"></textarea>
        <label class="form-label" for="textAreaExample2">Message</label>
      </div>
    </div>
    
    <!--Send Button-->
    <button unicorn:click="save_message" class="btn btn-rounded float-end" style="background-color:#B970FF" 
    onsubmit="this.form.reset()">Send
    </button>  <!--type="button" name="sendbtn"-->
  </div>


  <!--Scroll to the bottom of the page on submit-->
  <script type="text/javascript">
    function scrollDown(){
        var objDiv = document.getElementById("maindiv");
        objDiv.scrollTop = objDiv.scrollHeight;
    }
  </script>

</div>
